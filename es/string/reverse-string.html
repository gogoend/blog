<html>
  <head>
    <title>字符串反转 - 考虑多字节</title>
  </head>
  <body>
    <script>
      function isSurrogate(char) {
        if (typeof char !== 'string'){
          return false
        }
        return char.charCodeAt() >= 0xd800 && char.charCodeAt() <= 0xdbff;
      }

      function isJoiner(char) {
        if (typeof char !== 'string'){
          return false
        }
        if (
          [
            0x200d
          ].includes(char.charCodeAt())
        ) {
          return true
        }
        return false
      }

      function reverseString(str) {
        let currentChar = "";
        let singleCharUnits = []
        let result = "";

        for (let i = 0; i < str.length; i++) {
          currentChar += str[i]
          if( 
            [
              isSurrogate(str[i]),
              (isJoiner(str[i]) || isJoiner(str[i+1]))
            ].includes(true)
          ) {
            continue
          }
          singleCharUnits.unshift(currentChar)
          currentChar = ''

          console.log(singleCharUnits)
        }

        return singleCharUnits.join('')
      }
    </script>
  </body>
</html>
